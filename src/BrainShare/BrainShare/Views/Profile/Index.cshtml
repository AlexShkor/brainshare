@model BrainShare.Controllers.MyProfileViewModel

@{
    Layout = "_ProfileLayout.cshtml";
}


@section Scripts{

    <script src="@Url.Content("~/Scripts/jquery.form.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/custom/Profile/myProfile.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/imgAreaSelect/jquery.imgareaselect.pack.js")" type="text/javascript"></script>

    <script type="text/javascript">
        var myProfileViewModel = new MyProfileViewModel();
        ko.applyBindings(myProfileViewModel, $("#profileBody")[0]);
    </script>
}

<div id="overlay" style="display: none" data-bind="visible: ShowOverlay"></div>

<div>
    <div id="avatarContainer" class="pull-right" style="text-align: center;">
        <div class="avatar-container">
            <img style="width: 250px; height: 250px" alt="аватар" class="pics" src="@Model.AvatarUrl"/>
        </div>

        <a href="#" data-bind="visible: ShowChangeAvatarButton, click: UploadImg" style="display: block;">Выбрать аватар</a>
    </div>
</div>

<p class="error-mesage"></p>

<div style="display: none">
    @using (Html.BeginForm("UploadImage", "Profile", FormMethod.Post, new { enctype = "multipart/form-data", id = "myForm" }))
    {
        @Html.TextBox("UploadedFile", Model.UploadedFile, new { type = "file", id = "file" })
        @Html.ValidationMessage("UploadedFile")
                    
        <button type="submit" id="uploadImage" class="btn btn-primary">Upload</button>
    }
</div>


<div id="previewContainer" style="display: none; min-width: 300px" data-bind="visible: ShowPreviewControls">
    <div id="imgPreviewContainer"></div>
    <input type="hidden" id="avatarId" />
    <input type="hidden" id="avatarFormat" />

    <div>
        <button class="btn btn-primary btn-danger" style="float: left; margin-left: 7%; margin-top: 5%" data-bind="click: CancelImg">Отмена</button>
        <button class="btn btn-primary btn-success" style="float: right; margin-right: 7%; margin-top: 5%" data-bind="click: CropImg">Готово</button>
    </div>
</div>

