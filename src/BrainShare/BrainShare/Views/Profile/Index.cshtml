@model BrainShare.Controllers.MyProfileViewModel

@{
    Layout = "_ProfileLayout.cshtml";
}

@section Scripts{

    <script src="@Url.Content("~/Scripts/jquery.Jcrop.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.form.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/custom/Profile/myProfile.js")" type="text/javascript"></script>
    <script type="text/javascript">
        var myProfileViewModel = new MyProfileViewModel();
        ko.applyBindings(myProfileViewModel);
    </script>
}



<div class="container">

    @*<div id="fbFriendsSelector" style="position: absolute; left: 70%; top: 20%;"></div>*@
    @*<div class="clearfix"></div>*@
    <div style="position: relative">

        @* <div class="span1">
                    <a href="http://critterapp.pagodabox.com/others/admin" class="thumbnail">
                        <img src="http://critterapp.pagodabox.com/img/user.jpg" alt=""></a>
                </div>*@

        @* <p>some text (maybe status)</p>*@
        @*   <p><strong>@Model.Name</strong></p>*@
        @* <span class=" badge badge-warning">8 сообщений</span>
                    <span class=" badge badge-info">15 друзей</span>*@

        @*@if (ViewBag.IsFacebookAccount)
        {
            <a id="selectorToggle" class=" badge badge-info" href="#">Друзья из Фэйсбука</a>
        }*@


        <div id="avatarContainer">
            <div>
                @if (Model.AvatarUrl != null)
                {
                    <img alt="аватар" src="@Model.AvatarUrl"/>
                }

                @if (Model.AvatarUrl == null)
                {
                    <img alt="аватар" src="http://critterapp.pagodabox.com/img/user.jpg" />
                }
            </div>
            <a href="#" data-bind="click: UploadImg">Выбрать аватар</a>
        </div>

        <div>
            <div id="avatarPreviewContainer">
            </div>
            <input type="hidden" id="avatarId" />
            <input type="hidden" id="avatarFormat" />
            <div id="applyCropButtonContainer">
                <button class="btn" data-bind="click: ApplyBannerCrop, visible: ShowCropButton">Выбрать</button>
            </div>
        </div>
        <div data-bind="visible: ShowLoading"><span class="big-loading"></span></div>
    </div>
</div>

<p class="error-mesage"></p>

<div style="display: none">
    @using (Html.BeginForm("UploadImage", "Profile", FormMethod.Post, new { enctype = "multipart/form-data", id = "myForm" }))
    {
        @Html.TextBox("UploadedFile", Model.UploadedFile, new { type = "file", id = "file" })
        @Html.ValidationMessage("UploadedFile")
                    
        <button type="submit" id="uploadImage" class="btn btn-primary">Upload</button>
    }
</div>

