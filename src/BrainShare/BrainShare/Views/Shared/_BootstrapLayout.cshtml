@using System.Web.Optimization
@using BrainShare.Extensions
@using Newtonsoft.Json
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>@ViewBag.Title | BrainShare</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="@Styles.Url("~/content/css")" rel="stylesheet"/>
    <link href="@Url.Content("~/Content/bootstrapNavList.css")" rel="stylesheet"/>

    @* Libs Scripts*@
    <script src="~/Scripts/jquery-2.0.1.min.js"></script>
    <script src="~/Scripts/jquery.signalR-1.1.2.min.js"></script>
    <script src="~/Scripts/knockout-2.2.1.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Scripts/knockout-bootstrap.min.js"></script>
    <script src="/signalr/hubs"></script>
    <script src="~/Scripts/jquery-ui-1.10.3.js"></script>

    @* Our Scripts*@
    <script src="~/Scripts/custom/common.js"></script>
    <script src="~/Scripts/custom/addbook.js"></script>

    @RenderSection("head", required: false)
    @* favicons and touch icons go here *@
</head>
<body>
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="/">BrainShare</a>
                <div class="nav-collapse collapse">

                    @if (Request.IsAuthenticated)
                    { 
                        <p class="navbar-text pull-right ">
                            <a href="/profile/mybooks" class="navbar-link">@ViewBag.UserName</a> (@User.Identity.Name) <a  href="@Url.Action("Logout", "User")" >Logout</a>
                        </p>
                    }
                    else
                    {
                        <ul class="nav pull-right">
                            @Html.MenuLink("Регистрация", "Register", "User")
                            @Html.MenuLink("Войти", "Login", "User")
                            @Html.MenuLink("Facebook", "LoginWithFacebook", "User")
                        </ul>
                    }

                    <ul class="nav">
                        @Html.MenuLink("Активность", "Index", "Home")
                        @Html.MenuLink("Искать", "Search", "Books")

                        @{
                            var actionsForProfile = new Dictionary<string, List<string>>();
                            actionsForProfile["Сообщения"] = new List<string>() { "AllMessages", "Profile" };
                            actionsForProfile["Входящие"] = new List<string>() { "Inbox", "Profile" };
                            actionsForProfile["Мои Книги"] = new List<string>() { "MyBooks", "Profile" };
                            actionsForProfile["Я ищу Книги"] = new List<string>() { "WishList", "Profile" };

                        }
                        @Html.MenuDropdown(actionsForProfile, "Профиль")

                        @{
                            var actionsForHelp = new Dictionary<string, List<string>>();
                            actionsForHelp["Помощь"] = new List<string>() { "Index", "Help" };
                            actionsForHelp["Как добавить книгу в коллекцию?"] = new List<string>() { "HowToAddBook", "Help" };
                            actionsForHelp["Как найти нужную вам книгу?"] = new List<string>() { "HowToSearchBook", "Help" };
                            actionsForHelp["Как обменяться книгами?"] = new List<string>() { "HowToExchangeBook", "Help" };
                        }
                        @Html.MenuDropdown(actionsForHelp, "Помощь")

                        @Html.MenuLink("Отзывы", "Feedback", "Home")
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        @if (ViewBag.IsFacebookAccount)
        {
            <a id="selectorToggle" style="color: #4c66a4; font-weight: bold" href="#">Друзья из Фэйсбука</a>
        }
        <div id="fbFriendsSelector" style="position: absolute; left: 70%; top: 20%;"></div>
        @RenderBody()
        <hr>
        <footer>
            <p>&copy; BrainShare @System.DateTime.Now.ToString("yyyy")</p>
        </footer>
    </div>
    @RenderSection("Scripts", required: false)
    @if (ViewBag.IsFacebookAccount)
    {
        <script type="text/javascript" src="@Url.Content("~/Scripts/custom/fbfriendsSelector.js")"></script>
    }

</body>
</html>
